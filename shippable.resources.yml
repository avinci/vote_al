resources:
  - name: vote_fe
    type: image
    integration: demo_dh
    pointer:
      sourceName: "avinci/vote_fe"
    seed:
      versionName: "master.1"

  - name: vote_be
    type: image
    integration: demo_dh
    pointer:
      sourceName: "avinci/vote_be"
    seed:
      versionName: "master.1"

  - name: test_fe_lb
    type: loadBalancer
    integration: demo_gke
    pointer:
      sourceName: "fe_lb"
      method: LoadBalancer
      clusterName: "cluster"
    version:
      ports:
        - name: testport
          protocol: TCP
          port: 80
      selector:
        app: "test_fe"
#        shippable.manifestName: "vote_fe_temp"
#        shippable.jobName: "vote_app_deploy"

  - name: test_be_lb
    type: loadBalancer
    integration: demo_gke
    pointer:
      sourceName: "be_lb"
      method: clusterIP
      clusterName: "cluster"
    version:
      ports:
        - name: testport
          protocol: TCP
          port: 6379
      selector:
        app: "test_be"
#        shippable.manifestName: "vote_be_temp"
#        shippable.jobName: "vote_app_deploy"

  - name: test_be_options
    type: dockerOptions
    version:
      memory: 128
      portMappings:
        - "6379:6379/tcp"
      labels:
        app: "test_be"

  - name: test_fe_options
    type: dockerOptions
    version:
      memory: 128
      portMappings:
        - "80:80/tcp"
      labels:
        app: "test_fe"

  - name: prod_be_options
    type: dockerOptions
    version:
      memory: 256
      cpu: 256
      portMappings:
        - "6379:6379/tcp"
      labels:
        app: "prod_be"

  - name: prod_fe_options
    type: dockerOptions
    version:
      memory: 256
      cpu: 512
      portMappings:
        - "80:80/tcp"
      labels:
        app: "prod_fe"


#  - name: test_params
#    type: params
#    version:
#      params:
#        FE_LABEL: "vote-front-test"
#        BE_LABEL: "vote-back-test"
#
#  - name: prod_params
#    type: params
#    version:
#      params:
#        FE_LABEL: "vote-front-prod"
#        BE_LABEL: "vote-back-prod"
#
#  - name: relstate
#    type: state
#
#  - name: prodstate
#    type: state
#
#  - name: teststate
#    type: state
#
  - name: gke_cluster
    type: cluster
    integration: demo_gke
    pointer:
      sourceName: "cluster"
      region: us-west1-a
#
#  - name: gcloud_cliConfig
#    type: cliConfig
#    integration: drship_gcloud
#    pointer:
#      # replace us-central1-a with your availability zone
#      region: us-central1-a
#
#  - name: ship_voting_app_redis_gitRepo
#    type: gitRepo
#    # replace dr_github with your GitHub integration name
#    integration: demo_gh
#    pointer:
#      # replace with source code location (e.g. GitHub) where you cloned this
#      # sample project.
#      sourceName: devops-recipes/ship-voting-app-redis
#      branch: master